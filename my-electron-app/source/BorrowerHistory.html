<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Borrower History</title>
    <a href="BorrMS.html">Back</a>
</head>
<body>
    <h1>Borrower History</h1>

    <!-- Search Bar -->
    <input type="text" id="searchBar" placeholder="Search borrowers">

    <!-- Table to display borrower history -->
    <table id="borrowerHistoryTable">
        <thead>
            <tr>
                <th>Student ID</th>
                <th>Name</th>
                <th>Class</th>
                <th>A.no of Borrowed Book</th>
                <th>Title of Borrowed Book</th>
                <th>Date of Borrowing</th>
                <th>Date of Return</th>
            </tr>
        </thead>
        <tbody id="borrowerHistoryBody">
            <!-- Borrower history data will be displayed here -->
        </tbody>
    </table>

    <script>
        // JavaScript code to fetch and display borrower history
        document.addEventListener('DOMContentLoaded', function() {
            fetchBorrowerHistory();
        });

        function fetchBorrowerHistory() {
            fetch('fetch_borrower_history.php')
                .then(response => response.json())
                .then(data => displayBorrowerHistory(data))
                .catch(error => console.error('Error fetching borrower history:', error));
        }

        function displayBorrowerHistory(borrowers) {
            const borrowerHistoryBody = document.getElementById('borrowerHistoryBody');
            borrowerHistoryBody.innerHTML = ''; // Clear previous data

            borrowers.forEach(borrower => {
                const row = `
                    <tr>
                        <td>${borrower.studentId}</td>
                        <td>${borrower.name}</td>
                        <td>${borrower.class}</td>
                        <td>${borrower.A_no}</td>
                        <td>${borrower.title}</td>
                        <td>${borrower.dateBorrowing}</td>
                        <td>${borrower.dateReturn}</td>
                    </tr>
                `;
                borrowerHistoryBody.innerHTML += row;
            });
        }
    </script>
</body>
</html>
